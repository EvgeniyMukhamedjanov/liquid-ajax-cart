{% assign reference_url = '/reference/' %}
{% assign page_url_reference_slice = page.url | slice: 0, reference_url.size %}
{% assign is_reference_subpage = false %}
{% if page_url_reference_slice == reference_url and page.url.size > reference_url.size %}
    {% assign is_reference_subpage = true %}
{% endif %}

{% assign guide_url = '/guide/' %}
{% assign page_url_guide_slice = page.url | slice: 0, guide_url.size %}
{% assign is_guide = false %}
{% if page_url_guide_slice == guide_url and page.url.size == guide_url.size %}
    {% assign is_guide = true %}
{% endif %}

{% assign releases_url = '/releases/' %}
{% assign page_url_releases_slice = page.url | slice: 0, releases_url.size %}
{% assign is_releases = false %}
{% if page_url_releases_slice == releases_url and page.url.size == releases_url.size %}
    {% assign is_releases = true %}
{% endif %}


<!DOCTYPE html>
<html lang="en">
    <head>
        {% include head/full.html %}
        <style type="text/css">
            {% capture critical_css %}
                {% include styles/base.scss %}
                {% include styles/containers.scss %}
                {% include styles/navigation.scss %}
                {% include styles/masthead.scss %}
                {% include styles/highlight.scss %}
                {% if is_reference_subpage %}
                    {% include styles/sidebar.scss %}
                {% endif %}
                {% if is_guide %}
                    {% include styles/guide.scss %}
                {% endif %}
                {% if is_releases %}
                    {% include styles/releases.scss %}
                {% endif %}
            {% endcapture %}
            {{ critical_css | scssify }}
        </style>

    </head>

    <body class="layout-{{ page.layout }}">
        {% include navigation.html %}
        <hr class="nav-hr" />
        {% unless is_reference_subpage %}
            <div class="site-masthead">
                <div class="container">
                    <h1 class="site-masthead__title"><span class="heading-line">{{ page.title | default: site.name }}</span></h1>
                </div>
            </div>
        {% endunless %}

        <div style="overflow: hidden;">{{ content }}</div>
        <script>
            try {
                const heading = document.querySelector('.scope-markdown h1');
                if(heading) {
                    heading.innerHTML = `<span>${ heading.innerHTML }</span>`;
                    const headingWordBreak = () => {
                        if(heading.querySelector('span').offsetWidth > heading.parentNode.offsetWidth) {
                            heading.style.wordBreak = "break-all";
                        }
                    }
                    window.addEventListener('resize', headingWordBreak);
                    headingWordBreak();
                }
            } catch(e) {}
        </script>

        {% include footer/full.html %}
    </body>
    {% if is_guide %}
        <script async="" defer="" src="https://buttons.github.io/buttons.js"></script>
    {% endif %}
</html>
