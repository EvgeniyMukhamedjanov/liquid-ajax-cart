var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{Z:()=>Bt});const n="liquid-ajax-cart",o="data-ajax-cart",r="ajax-cart",i="js-ajax-cart",a="add",s="change",c="update",u="clear",l="get",d=`${n}:queue-start`,f=`${n}:queue-end`,h=`${n}:request-start`,p=`${n}:request-end`,m=[];let y=!1;function v(t){var e;(null===(e=t.options)||void 0===e?void 0:e.important)&&0!==m.length?m[0].push(t):1===m.push([t])&&(g(!0),b())}function b(){if(0===m.length)return void g(!1);if(0===m[0].length)return m.shift(),void b();const{requestType:t,body:e,options:n}=m[0][0];!function(t,e,n,o=undefined){const r=S(t);let i;t!==l&&(i=e||{});const a=t===l?"GET":"POST",s=n.info||{},c="firstComplete"in n?[n.firstComplete]:[],u={requestType:t,endpoint:r,requestBody:i,info:s},d=[],f=new CustomEvent(h,{detail:{requestState:{requestType:t,endpoint:r,info:s,requestBody:i},onResult:t=>{c.push(t)}}});if(document.dispatchEvent(f),"lastComplete"in n&&c.push(n.lastComplete),s.cancel)return void w(c,o,u);if(void 0!==i){let t;if(i instanceof FormData||i instanceof URLSearchParams?i.has("sections")&&(t=i.get("sections").toString()):t=i.sections,"string"==typeof t||t instanceof String||Array.isArray(t)){const e=[];if(Array.isArray(t)?e.push(...t):e.push(...t.split(",")),e.length>5){d.push(...e.slice(5));const t=e.slice(0,5).join(",");i instanceof FormData||i instanceof URLSearchParams?i.set("sections",t):i.sections=t}}else null!=t&&console.error(`Liquid Ajax Cart: "sections" parameter in a Cart Ajax API request must be a string or an array. Now it is ${t}`)}const p={method:a};t!==l&&(i instanceof FormData||i instanceof URLSearchParams?(p.body=i,p.headers={"x-requested-with":"XMLHttpRequest"}):(p.body=JSON.stringify(i),p.headers={"Content-Type":"application/json"})),fetch(r,p).then((t=>t.json().then((e=>({ok:t.ok,status:t.status,body:e}))))).then((t=>(u.responseData=t,!u.responseData.ok||u.responseData.body.token&&0===d.length?u:$(d).then((t=>(u.extraResponseData=t,u)))))).catch((t=>{console.error("Liquid Ajax Cart: Error while performing cart Ajax request"),console.error(t),u.fetchError=t})).finally((()=>{w(c,o,u)}))}(t,e,n,(()=>{m[0].shift(),b()}))}function g(t){y=t;const e=new CustomEvent(y?d:f);document.dispatchEvent(e)}function w(t,e,n){const o=new CustomEvent(p,{detail:{requestState:n}});if(document.dispatchEvent(o),t.forEach((t=>{try{t(n)}catch(t){console.error("Liquid Ajax Cart: Error during Ajax request result callback in ajax-api"),console.error(t)}})),e)try{e()}catch(t){console.error("Liquid Ajax Cart: Error during Ajax request final internal callback in ajax-api"),console.error(t)}}function $(t=[]){const e={};return t.length>0&&(e.sections=t.slice(0,5).join(",")),fetch(S(c),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json().then((n=>{const o={ok:e.ok,status:e.status,body:n};return t.length<6?o:$(t.slice(5)).then((t=>{var e;return t.ok&&(null===(e=t.body)||void 0===e?void 0:e.sections)&&"object"==typeof t.body.sections&&("sections"in o.body||(o.body.sections={}),o.body.sections=Object.assign(Object.assign({},o.body.sections),t.body.sections)),o}))}))))}function q(t={},e={}){v({requestType:a,body:t,options:e})}function A(t={},e={}){v({requestType:s,body:t,options:e})}function L(t={},e={}){v({requestType:c,body:t,options:e})}function E(t={},e={}){v({requestType:u,body:t,options:e})}function S(t){var e,n,o,r,i,d,f,h,p,m;switch(t){case a:return`${(null===(n=null===(e=window.Shopify)||void 0===e?void 0:e.routes)||void 0===n?void 0:n.root)||"/"}cart/add.js`;case s:return`${(null===(r=null===(o=window.Shopify)||void 0===o?void 0:o.routes)||void 0===r?void 0:r.root)||"/"}cart/change.js`;case l:return`${(null===(d=null===(i=window.Shopify)||void 0===i?void 0:i.routes)||void 0===d?void 0:d.root)||"/"}cart.js`;case u:return`${(null===(h=null===(f=window.Shopify)||void 0===f?void 0:f.routes)||void 0===h?void 0:h.root)||"/"}cart/clear.js`;case c:return`${(null===(m=null===(p=window.Shopify)||void 0===p?void 0:p.routes)||void 0===m?void 0:m.root)||"/"}cart/update.js`;default:return}}function j(){return y}const x=`${o}-initial-state`;let C,T=null;function k(){return{cart:T,previousCart:C}}const D=`${o}-bind`;function B(){k().cart&&document.querySelectorAll(`[${D}]`).forEach((t=>{const e=t.getAttribute(D);t.textContent=function(t){const{stateBinderFormatters:e}=O,[n,...o]=t.split("|");let r=N(n,k().cart);return o.forEach((t=>{const n=t.trim();""!==n&&("object"==typeof e&&n in e?r=e[n](r):n in R?r=R[n](r):console.warn(`Liquid Ajax Cart: the "${n}" formatter is not found`))})),"string"==typeof r||r instanceof String||"number"==typeof r||r instanceof Number?r.toString():(console.error(`Liquid Ajax Cart: the calculated value for the ${D}="${t}" element must be string or number. But the value is`,r),"")}(e)}))}function N(t,e){const n=t.split("."),o=n.shift().trim();return""!==o&&o in e&&n.length>0?N(n.join("."),e[o]):e[o]}const R={money_with_currency:t=>{var e;const n=k();if("number"!=typeof t&&!(t instanceof Number))return console.error("Liquid Ajax Cart: the 'money_with_currency' formatter is not applied because the value is not a number. The value is ",t),t;const o=t/100;return"Intl"in window&&(null===(e=window.Shopify)||void 0===e?void 0:e.locale)?Intl.NumberFormat(window.Shopify.locale,{style:"currency",currency:n.cart.currency}).format(o):`${o.toFixed(2)} ${n.cart.currency}`}},O={stateBinderFormatters:{},requestErrorText:"There was an error while updating your cart. Please try again.",updateOnWindowFocus:!0};function F(t,e){t in O&&"computed"!==t?(O[t]=e,"stateBinderFormatters"===t&&B()):console.error(`Liquid Ajax Cart: unknown configuration parameter "${t}"`)}const M=`${o}-section`,P=`${o}-static-element`,H=`${o}-section-scroll`,U="shopify-section-",I=`${r}-product-form`,_="in-progress";class W extends HTMLElement{constructor(){var t,e;super();const n=this,o=this.querySelectorAll("form");if(1!==o.length)return void console.error(`Liquid Ajax Cart: "${I}" element must have one "form" element as a child, ${o.length} found`,n);const r=o[0];new URL(r.action).pathname===`${(null===(e=null===(t=window.Shopify)||void 0===t?void 0:t.routes)||void 0===e?void 0:e.root)||"/"}cart/add`?r.addEventListener("submit",(t=>{if(!n.hasAttribute(_)){const t=new FormData(r);n.setAttribute(_,""),q(t,{lastComplete:()=>{n.removeAttribute(_)},info:{initiator:n}})}t.preventDefault()})):console.error(`Liquid Ajax Cart: "${I}" element's form "action" attribute value isn't a product form action URL`,r,n)}}var J,V,Z,z,G,K,X,Q;const Y=`${(null===(V=null===(J=window.Shopify)||void 0===J?void 0:J.routes)||void 0===V?void 0:V.root)||"/"}cart/change`,tt=`${(null===(z=null===(Z=window.Shopify)||void 0===Z?void 0:Z.routes)||void 0===z?void 0:z.root)||"/"}cart/add`,et=`${(null===(K=null===(G=window.Shopify)||void 0===G?void 0:G.routes)||void 0===K?void 0:K.root)||"/"}cart/clear`,nt=`${(null===(Q=null===(X=window.Shopify)||void 0===X?void 0:X.routes)||void 0===Q?void 0:Q.root)||"/"}cart/update`,ot=`${o}-request-button`;function rt(t,e){let n;const o=[Y,tt,et,nt];if(!t.hasAttribute(ot))return;const r=t.getAttribute(ot);if(r){let t;try{if(t=new URL(r,window.location.origin),!o.includes(t.pathname))throw`URL should be one of the following: ${Y}, ${tt}, ${nt}, ${et}`;n=t}catch(t){console.error(`Liquid Ajax Cart: ${ot} contains an invalid URL as a parameter.`,t)}}else if(t instanceof HTMLAnchorElement&&t.hasAttribute("href")){const e=new URL(t.href);o.includes(e.pathname)?n=e:t.hasAttribute(ot)&&console.error(`Liquid Ajax Cart: a link with the ${ot} contains an invalid href URL.`,`URL should be one of the following: ${Y}, ${tt}, ${nt}, ${et}`)}if(void 0===n)return void console.error(`Liquid Ajax Cart: a ${ot} element doesn't have a valid URL`);if(e&&e.preventDefault(),j())return;const i=new FormData;switch(n.searchParams.forEach(((t,e)=>{i.append(e,t)})),n.pathname){case tt:q(i,{info:{initiator:t}});break;case Y:A(i,{info:{initiator:t}});break;case nt:L(i,{info:{initiator:t}});break;case et:E({},{info:{initiator:t}})}}function it(t,e){let n,o;return t.length>3?(n=e.cart.items.find((e=>e.key===t)),o="id"):(n=e.cart.items[Number(t)-1],o="line"),void 0===n&&(n=null,console.error(`Liquid Ajax Cart: line item with ${o}="${t}" not found`)),[n,o]}const at=`${o}-quantity-input`;function st(t){return!!t.hasAttribute(at)&&(t instanceof HTMLInputElement&&("text"===t.type||"number"===t.type)||(console.error(`Liquid Ajax Cart: the ${at} attribute supports "input" elements only with the "text" and the "number" types`),!1))}function ct(){document.querySelectorAll(`input[${at}]`).forEach((t=>{if(!st(t))return;if(j())return void(t.disabled=!0);const e=k(),n=t.getAttribute(at).trim(),[o]=it(n,e);o?t.value=o.quantity.toString():null===o&&(t.value="0"),t.disabled=!1}))}function ut(t,e){if(!st(t))return;if(e&&e.preventDefault(),j())return;let n=Number(t.value.trim());const o=t.getAttribute(at).trim();if(isNaN(n))return void console.error(`Liquid Ajax Cart: input value of a ${at} must be an Integer number`);if(n<1&&(n=0),!o)return void console.error(`Liquid Ajax Cart: attribute value of a ${at} must be an item key or an item index`);const r=o.length>3?"id":"line",i=new FormData;i.set(r,o),i.set("quantity",n.toString()),A(i,{info:{initiator:t}}),t.blur()}const lt=`${o}-property-input`;function dt(t){const e=t.getAttribute(lt),n=t.getAttribute("name");console.error(`Liquid Ajax Cart: the element [${lt}="${e}"]${n?`[name="${n}"]`:""} has wrong attributes.`)}function ft(t){return!!t.hasAttribute(lt)&&!!(t instanceof HTMLInputElement&&"hidden"!==t.type||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)}function ht(t){const e={objectCode:void 0,propertyName:void 0,attributeValue:void 0};if(!t.hasAttribute(lt))return e;let n=t.getAttribute(lt).trim();if(!n){const e=t.getAttribute("name").trim();e&&(n=e)}if(!n)return dt(t),e;if(e.attributeValue=n,"note"===n)return e.objectCode="note",e;let[o,...r]=n.trim().split("[");return!r||1!==r.length||r[0].length<2||r[0].indexOf("]")!==r[0].length-1?(dt(t),e):(e.objectCode=o,e.propertyName=r[0].replace("]",""),e)}function pt(){document.querySelectorAll(`[${lt}]`).forEach((t=>{if(!ft(t))return;if(j())return void(t.disabled=!0);const{objectCode:e,propertyName:n,attributeValue:o}=ht(t);if(!e)return;const r=k();let i,a=!1;if("note"===e)i=r.cart.note;else if("attributes"===e)i=r.cart.attributes[n];else{const[t,s]=it(e,r);t&&(i=t.properties[n]),null===t&&(console.error(`Liquid Ajax Cart: line item with ${s}="${e}" was not found when the [${lt}] element with "${o}" value tried to get updated from the State`),a=!0)}t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type)?t.checked=t.value===i:("string"==typeof i||i instanceof String||"number"==typeof i||i instanceof Number||(Array.isArray(i)||i instanceof Object?(i=JSON.stringify(i),console.warn(`Liquid Ajax Cart: the ${lt} with the "${o}" value is bound to the ${n} ${"attributes"===e?"attribute":"property"} that is not string or number: ${i}`)):i=""),t.value=i),a||(t.disabled=!1)}))}function mt(t,e){if(!ft(t))return;e&&e.preventDefault(),t.blur();const n=k();if(j())return;const{objectCode:o,propertyName:r,attributeValue:i}=ht(t);if(!o)return;let a=t.value;if(t instanceof HTMLInputElement&&"checkbox"===t.type&&!t.checked){let t=document.querySelector(`input[type="hidden"][${lt}="${i}"]`);t||"note"!==o&&"attributes"!==o||(t=document.querySelector(`input[type="hidden"][${lt}][name="${i}"]`)),a=t?t.value:""}if("note"===o){const e=new FormData;e.set("note",a),L(e,{info:{initiator:t}})}else if("attributes"===o){const e=new FormData;e.set(`attributes[${r}]`,a),L(e,{info:{initiator:t}})}else{const[e,s]=it(o,n);if(null===e&&console.error(`Liquid Ajax Cart: line item with ${s}="${o}" was not found when the [${lt}] element with "${i}" value tried to update the cart`),!e)return;const c=Object.assign({},e.properties);c[r]=a;const u=new FormData;let l=u;u.set(s,o),u.set("quantity",e.quantity.toString());for(let t in c){const n=c[t];"string"==typeof n||n instanceof String?u.set(`properties[${t}]`,c[t]):l={[s]:o,quantity:e.quantity,properties:c}}A(l,{info:{initiator:t}})}}var yt=function(t,e,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(t,n):r?r.value=n:e.set(t,n),n},vt=function(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)};const bt=`${r}-quantity`,gt=`${o}-quantity-plus`,wt=`${o}-quantity-minus`;function $t(){customElements.define(I,W),document.addEventListener("click",(function(t){for(let e=t.target;e&&e!=document.documentElement;e=e.parentElement)rt(e,t)}),!1),document.addEventListener("change",(function(t){mt(t.target,t)}),!1),document.addEventListener("keydown",(function(t){const e=t.target;"Enter"===t.key&&(e instanceof HTMLTextAreaElement&&!t.ctrlKey||mt(e,t)),"Escape"===t.key&&function(t){if(!ft(t))return;if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;if(t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type))return;const e=k(),{objectCode:n,propertyName:o}=ht(t);if(!n)return;let r;if("note"===n)r=e.cart.note;else if("attributes"===n)r=e.cart.attributes[o];else{const[t]=it(n,e);t&&(r=t.properties[o])}void 0!==r&&(r||"string"==typeof r||r instanceof String||(r=""),t.value=String(r)),t.blur()}(e)}),!1),document.addEventListener(d,pt),document.addEventListener(p,pt),document.addEventListener(f,pt),pt(),document.addEventListener("change",(function(t){ut(t.target,t)}),!1),document.addEventListener("keydown",(function(t){"Enter"===t.key&&ut(t.target,t),"Escape"===t.key&&function(t){if(!st(t))return;const e=t.getAttribute(at).trim();let n;const o=k();if(e.length>3)n=o.cart.items.find((t=>t.key===e));else{const t=Number(e)-1;n=o.cart.items[t]}n&&(t.value=n.quantity.toString()),t.blur()}(t.target)}),!1),document.addEventListener(d,ct),document.addEventListener(p,ct),document.addEventListener(f,ct),ct(),function(){var t,e,n,o,r,i;customElements.define(bt,(i=class extends HTMLElement{constructor(){super(),t.add(this),e.set(this,void 0),n.set(this,void 0);const i=this.querySelectorAll("input");1===i.length?(yt(this,n,i[0],"f"),vt(this,n,"f").hasAttribute(at)?this.querySelectorAll(`[${gt}], [${wt}]`).forEach((i=>{i.addEventListener("click",(e=>{if(!j()){const e=Number(vt(this,n,"f").value);if(isNaN(e))return void console.error(`Liquid Ajax Cart: "${bt}" element's input value isn't a number`,vt(this,n,"f"),this);let r=e;r=i.hasAttribute(gt)?r+1:r-1,r<1&&(r=1),r!==e&&(vt(this,n,"f").value=r.toString(),vt(this,t,"m",o).call(this))}e.preventDefault()})),i.addEventListener("focusout",(n=>{n.relatedTarget&&i.contains(n.relatedTarget)||void 0!==vt(this,e,"f")&&vt(this,t,"m",r).call(this)}))})):console.error(`Liquid Ajax Cart: "${bt}" element's input must have the "${at}" attribute`,vt(this,n,"f"),this)):console.error(`Liquid Ajax Cart: "${bt}" element must have one "input" element as a child, ${i.length} found`,this)}},e=new WeakMap,n=new WeakMap,t=new WeakSet,o=function(){void 0!==vt(this,e,"f")&&clearTimeout(vt(this,e,"f")),yt(this,e,setTimeout((()=>{vt(this,t,"m",r).call(this)}),300),"f")},r=function(){void 0!==vt(this,e,"f")&&clearTimeout(vt(this,e,"f")),yt(this,e,void 0,"f"),k(),j()||vt(this,n,"f").dispatchEvent(new Event("change",{bubbles:!0}))},i))}()}const qt=`${o}-errors`,At=`${i}-init`,Lt=`${i}-processing`,Et=`${i}-empty`,St=`${i}-not-empty`;function jt(){const t=document.querySelector("html"),e=k();t.classList.toggle(At,null!==e.cart),t.classList.toggle(Lt,j()),t.classList.toggle(Et,0===e.cart.item_count),t.classList.toggle(St,e.cart.item_count>0)}var xt,Ct;let Tt=!1;function kt(t){if(!Tt)throw new Error(`Liquid Ajax Cart: the "${t}" method might be used only after initialization`)}function Dt(t){throw new Error(`Liquid Ajax Cart: the "${t}" is a read-only property`)}if(!("liquidAjaxCart"in window)){class t{constructor(){xt.add(this),this.conf=F,function(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)}(this,xt,"m",Ct).call(this)}get(t={}){return kt("get"),function(t={}){v({requestType:l,body:void 0,options:t})}(t)}add(t={},e={}){return kt("add"),q(t,e)}change(t={},e={}){return kt("change"),A(t,e)}update(t={},e={}){return kt("update"),L(t,e)}clear(t={},e={}){return kt("clear"),E(t,e)}get cart(){return kt("cart"),k().cart}set cart(t){Dt("cart")}get previousCart(){return kt("previousCart"),k().previousCart}set previousCart(t){Dt("previousCart")}get processing(){return kt("processing"),j()}set processing(t){Dt("processing")}get init(){return kt("init"),Tt}set init(t){Dt("init")}}xt=new WeakSet,Ct=function(){return t=this,e=void 0,r=function*(){document.addEventListener(h,(t=>{const{requestState:e,onResult:n}=t.detail;if(void 0!==e.requestBody){const t=[];if(document.querySelectorAll(`[${M}]`).forEach((e=>{const n=e.closest(`[id^="${U}"]`);if(n){const e=n.id.replace(U,"");-1===t.indexOf(e)&&t.push(e)}else console.error(`Liquid Ajax Cart: there is a ${M} element that is not inside a Shopify section. All the ${M} elements must be inside Shopify sections.`)})),t.length){let n,o=t.join(",");e.requestBody instanceof FormData||e.requestBody instanceof URLSearchParams?e.requestBody.has("sections")&&(n=e.requestBody.get("sections").toString()):n=e.requestBody.sections,(("string"==typeof n||n instanceof String)&&""!==n||n&&Array.isArray(n)&&n.length>0)&&(o=`${n.toString()},${o}`),e.requestBody instanceof FormData||e.requestBody instanceof URLSearchParams?e.requestBody.set("sections",o):e.requestBody.sections=o}}})),document.addEventListener(p,(t=>{var e,n,o;t.detail.sections=[];const{requestState:r}=t.detail,i=new DOMParser,s=[];if((null===(e=r.responseData)||void 0===e?void 0:e.ok)&&"sections"in r.responseData.body){let t=r.responseData.body.sections;(null===(o=null===(n=r.extraResponseData)||void 0===n?void 0:n.body)||void 0===o?void 0:o.sections)&&(t=Object.assign(Object.assign({},t),r.extraResponseData.body.sections));for(let e in t)t[e]?document.querySelectorAll(`#shopify-section-${e}`).forEach((n=>{let o=[];const c="__noId__",u={};n.querySelectorAll(` [${H}] `).forEach((t=>{let e=t.getAttribute(H).toString().trim();""===e&&(e=c),e in u||(u[e]=[]),u[e].push({scroll:t.scrollTop,height:t.scrollHeight})}));const l={},d=n.querySelectorAll(`[${P}]`);d&&d.forEach((t=>{let e=t.getAttribute(P).toString().trim();""===e&&(e=c),e in l||(l[e]=[]),l[e].push(t)}));const f=n.querySelectorAll(`[${M}]`);if(f){const r=i.parseFromString(t[e],"text/html");for(let t in l)r.querySelectorAll(` [${P}="${t.replace(c,"")}"] `).forEach(((e,n)=>{n+1<=l[t].length&&(e.before(l[t][n]),e.parentElement.removeChild(e))}));const a=r.querySelectorAll(`[${M}]`);if(f.length!==a.length){console.error(`Liquid Ajax Cart: the received HTML for the "${e}" section has a different quantity of the "${M}" containers. The section will be updated completely.`);const t=r.querySelector(`#${U}${e}`);if(t){for(n.innerHTML="";t.childNodes.length;)n.appendChild(t.firstChild);o.push(n)}}else f.forEach(((t,e)=>{t.before(a[e]),t.parentElement.removeChild(t),o.push(a[e])}))}for(let t in u)n.querySelectorAll(` [${H}="${t.replace(c,"")}"] `).forEach(((e,n)=>{n+1<=u[t].length&&(r.requestType!==a||u[t][n].height>=e.scrollHeight)&&(e.scrollTop=u[t][n].scroll)}));o.length>0&&s.push({id:e,elements:o})})):console.error(`Liquid Ajax Cart: the HTML for the "${e}" section was requested but the response is ${t[e]}`)}s.length>0&&(t.detail.sections=s)})),document.addEventListener(h,(t=>{const{requestState:e,onResult:n}=t.detail;let o;e.requestType===a?o=(t=>{var e;let n;const o=null===(e=t.info)||void 0===e?void 0:e.initiator;return o instanceof W&&(n=o.querySelectorAll(`[${qt}="form"]`)),n})(e):e.requestType===s&&(o=(t=>{var e;let n;const o=k();let r,i;if(t.requestBody instanceof FormData||t.requestBody instanceof URLSearchParams?(t.requestBody.has("line")&&(i=t.requestBody.get("line").toString()),t.requestBody.has("id")&&(r=t.requestBody.get("id").toString())):("line"in t.requestBody&&(i=String(t.requestBody.line)),"id"in t.requestBody&&(r=String(t.requestBody.id))),i){const t=Number(i);if(t>0){const n=t-1;r=null===(e=o.cart.items[n])||void 0===e?void 0:e.key}}return r&&(n=r.indexOf(":")>-1?document.querySelectorAll(`[${qt}="${r}"]`):document.querySelectorAll(o.cart.items.reduce(((t,e)=>(e.key!==r&&e.id!==Number(r)||t.push(`[${qt}="${e.key}"]`),t)),[]).join(","))),n})(e)),o&&o.length>0&&(o.forEach((t=>{t.textContent=""})),n((t=>{if(t.info.cancel)return;const e=function(t){var e;const{requestErrorText:n}=O;if(null===(e=t.responseData)||void 0===e?void 0:e.ok)return"";if("responseData"in t){if("description"in t.responseData.body&&t.responseData.body.description)return t.responseData.body.description;if("message"in t.responseData.body&&t.responseData.body.message)return t.responseData.body.message}return n}(t);e&&o.forEach((t=>{t.textContent=e}))})))})),yield function(){document.addEventListener(p,(t=>{var e,n;t.detail.cartUpdated=!1;const{requestState:o}=t.detail;let r;(null===(e=o.extraResponseData)||void 0===e?void 0:e.ok)&&o.extraResponseData.body.token?r=o.extraResponseData.body:(null===(n=o.responseData)||void 0===n?void 0:n.ok)&&o.responseData.body.token&&(r=o.responseData.body),r&&(C=T,T=r,t.detail.cartUpdated=!0)}));const t=document.querySelector(`[${x}]`);if(t)try{T=JSON.parse(t.textContent)}catch(t){console.error(`Liquid Ajax Cart: can't parse cart JSON from the "${x}" script`),console.error(t)}return new Promise(((t,e)=>{var n,o;T?t():fetch(`${(null===(o=null===(n=window.Shopify)||void 0===n?void 0:n.routes)||void 0===o?void 0:o.root)||"/"}cart.js`,{headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((e=>{T=e,t()})).catch((t=>{e('Can\'t load the cart state from the "/cart.js" endpoint')}))}))}(),document.addEventListener(p,B),B(),$t(),document.addEventListener(d,jt),document.addEventListener(p,jt),document.addEventListener(f,jt),jt(),Tt=!0;const t=new CustomEvent(`${n}:init`);document.dispatchEvent(t),window.addEventListener("focus",(()=>{O.updateOnWindowFocus&&L({},{})}))},new((o=void 0)||(o=Promise))((function(n,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}));var t,e,o,r},window.liquidAjaxCart=new t}const Bt=window.liquidAjaxCart;var Nt=e.Z;export{Nt as default};